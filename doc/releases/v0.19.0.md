# Release Notes - OraDBA v0.19.0

**Release Date**: January 21, 2026
**Release Type**: Major Architecture Refactoring

## Overview

OraDBA v0.19.0 represents a complete architectural overhaul with the introduction of
the **Registry API**, **Plugin System**, and **Environment Builder** architecture.
This release includes comprehensive documentation updates, extended product support,
and complete test coverage with **1086 tests across 65 test files**.

## ğŸ¯ Highlights

### Registry API - Unified Installation Management

New unified registry system for all Oracle installations:

- **Single Source of Truth**: Combines oratab (databases) and oradba_homes.conf (other products)
- **Consistent Interface**: Unified `oradba_registry_*` functions
- **Auto-Discovery**: Automatically discovers and registers installations
- **Auto-Sync**: Database homes from oratab sync to oradba_homes.conf
- **Query Capabilities**: Filter by type, name, version, or any attribute
- **Export/Import**: Configuration backup and migration support

### Plugin System - 9 Product Types

Complete plugin architecture for all Oracle products:

- **database**: Oracle Database (RDBMS)
- **client**: Oracle Full Client
- **iclient**: Oracle Instant Client  
- **datasafe**: Oracle Data Safe On-Premises Connector
- **oud**: Oracle Unified Directory
- **java**: Oracle Java/JDK installations
- **weblogic**: WebLogic Server
- **oms**: Enterprise Manager OMS
- **emagent**: Enterprise Manager Agent

Each plugin provides:

- Product detection and validation
- Version detection
- Environment configuration
- Status checking
- Instance discovery

### Environment Builder - Client Path Management

Smart client tool management for non-client products:

- **Auto-Configuration**: `ORADBA_CLIENT_PATH_FOR_NON_CLIENT` setting
- **Flexible Options**: `auto`, `none`, or specific client name
- **Path Management**: Automatic PATH and LD_LIBRARY_PATH configuration
- **Priority Order**: Product paths before client paths
- **Deduplication**: Prevents duplicate path entries

### Comprehensive Testing

- **1086 Tests**: Across 65 BATS test files
- **1041 Passing**: All core functionality verified
- **41 Skipped**: Integration tests (Docker/OCI required)
- **Smart Selection**: `.testmap.yml` runs only affected tests
- **Full Coverage**: Core libraries, plugins, binaries, and integrations

### Documentation Rewrite

All 20 user documentation files updated to v0.19.x architecture:

- **Quickstart Guide**: Updated for Registry API and Plugin System
- **Installation Guide**: Registry-based installation workflows
- **Configuration Guide**: New configuration options and patterns
- **Environment Guide**: Environment builder and client path management
- **Developer Guide**: Plugin development and extension authoring
- **API Reference**: Complete API documentation for all modules

## ğŸ“¦ What's New

### Documentation Improvements

- **Release Archive Consolidation**: Reduced release archive from 29 to 10 files
  by consolidating patch releases into a single comprehensive document covering v0.10.0 through v0.18.5
- **GitHub Releases Cleanup**: Streamlined releases from 74 to 40, keeping only major milestones
- **Historical Preservation**: All 73 git tags preserved for historical reference and code checkout
- **Improved Navigation**: Enhanced archive README with clear links to
  consolidated documentation, CHANGELOG, and GitHub Releases

## ğŸ“¦ New Features

### Registry API (`src/lib/oradba_registry.sh`)

Core registry functions for unified installation management:

- `oradba_registry_get_all()`: Get all installations (databases + homes)
- `oradba_registry_get_by_name()`: Lookup by name or alias
- `oradba_registry_get_by_type()`: Filter by product type
- `oradba_registry_sync_oratab()`: Auto-sync database homes from oratab
- `oradba_registry_discover()`: Auto-discover Oracle installations
- `oradba_registry_export()`: Export configuration
- `oradba_registry_import()`: Import configuration

### Plugin System (`src/lib/plugins/`)

Nine product plugins with consistent interface:

- **database_plugin.sh**: Database detection, version, status, listener
- **client_plugin.sh**: Full client detection and configuration
- **iclient_plugin.sh**: Instant client with library-based version detection
- **datasafe_plugin.sh**: Data Safe connector management
- **oud_plugin.sh**: Oracle Unified Directory support
- **java_plugin.sh**: Java/JDK version detection and PATH configuration
- **weblogic_plugin.sh**: WebLogic Server support (stub)
- **oms_plugin.sh**: Enterprise Manager OMS support (stub)
- **emagent_plugin.sh**: Enterprise Manager Agent support (stub)

### Environment Builder (`src/lib/oradba_env_builder.sh`)

Smart environment configuration:

- `oradba_product_needs_client()`: Check if product needs client tools
- `oradba_resolve_client_home()`: Resolve client home from settings
- `oradba_add_client_path()`: Add client paths to environment
- `build_environment()`: Complete environment builder with plugin delegation

### Enhanced Tools

- **oradba_homes.sh**: Registry-based home management with validate command
- **oradba_env.sh**: Enhanced environment switcher with registry integration
- **oraenv.sh**: Simplified with plugin and registry delegation
- **dbstatus.sh**: Plugin-based status checking

### Configuration

New configuration options:

- `ORADBA_CLIENT_PATH_FOR_NON_CLIENT`: Client path strategy (`auto`, `none`, client name)
- `ORADBA_AUTO_DISCOVER`: Enable/disable auto-discovery (default: true)
- `ORADBA_AUTO_SYNC_ORATAB`: Enable/disable oratab sync (default: true)

## ğŸ”§ Technical Details

### Architecture Changes

**Before v0.19.0:**

```text
oratab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”œâ”€â”€> Hardcoded logic in oraenv.sh
oradba_homes.conf â”€â”€â”€â”€â”€â”€â”€â”˜
```

**After v0.19.0:**

```text
oratab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”œâ”€â”€> Registry API â”€â”€> Plugin System â”€â”€> Environment Builder
oradba_homes.conf â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Test Infrastructure

### Testing

- **1086 Total Tests**: 65 BATS test files
- **1045 Passing Tests**: All core functionality verified
- **41 Skipped Tests**: Integration tests requiring Docker/OCI
- **100% Pass Rate**: Zero failures
- **Smart Test Selection**: `.testmap.yml` maps files to tests
- **Test Categories**:
  - Core libraries (oradba_common, oradba_db_functions, etc.)
  - Registry API and plugin system
  - Environment builder and client path configuration
  - Command-line tools (oraenv, oradba_homes, etc.)
  - Integration and workflow tests

### Code Quality

- **ShellCheck**: All shell scripts pass strict linting
- **MarkdownLint**: All documentation passes linting  
- **Consistent Style**: Follows OraDBA coding standards
- **Function Documentation**: Complete headers for all functions
- **Error Handling**: Comprehensive error checking throughout

## ğŸ› Bug Fixes

### Test Infrastructure

- Fixed plugin count test (5 â†’ 9 plugins)
- Fixed client_path_config tests (corrected oradba_homes.conf format)
- Fixed oradba_homes validation (corrected field separator handling)
- Updated test counts in documentation

### Registry and Plugin System

- Fixed module sourcing in oradba_env.sh commands
- Fixed auto-sync on first login (generate_sid_lists, generate_oracle_home_aliases)
- Added conditional sourcing to avoid redundant loading

### Environment Configuration

- Fixed PATH deduplication for repeated sourcing
- Fixed colon delimiter parsing in oradba_env.sh
- Fixed DataSafe ORACLE_HOME adjustment
- Fixed database status operations

## ğŸ“š Migration Guide

### From 0.18.x

1. **Backup Configuration**:

   ```bash
   cp $ORADBA_PREFIX/etc/oradba_customer.conf ~/oradba_customer.backup
   cp $ORADBA_PREFIX/etc/oradba_homes.conf ~/oradba_homes.backup 2>/dev/null || true
   ```

2. **Update OraDBA**:

   ```bash
   cd $ORADBA_BASE
   git pull origin main
   git checkout v0.19.0
   ```

3. **Review New Settings**:

   ```bash
   # Optional: Configure client path for non-client products
   export ORADBA_CLIENT_PATH_FOR_NON_CLIENT="auto"  # or "none" or client name
   
   # Optional: Disable auto-sync if needed
   export ORADBA_AUTO_SYNC_ORATAB="false"
   ```

4. **Verify Installation**:

   ```bash
   oradba_check.sh
   oradba_validate.sh
   ```

### Breaking Changes

**None.** This release maintains full backward compatibility with 0.18.x.

- Existing configurations work without changes
- New features are opt-in via configuration
- Legacy functions remain available

### New Features to Adopt

1. **Use Registry API** instead of direct file parsing
2. **Enable auto-sync** for unified database management
3. **Configure client paths** for DataSafe/OUD/WebLogic
4. **Use plugin system** for custom product support

## ğŸ› Known Issues

None at this time. All 1086 tests passing.

## ğŸ“– Documentation

- **Full Documentation**: [docs/](../../README.md)
- **API Reference**: Function headers in source files
- **Development Guide**: [doc/development.md](../development.md)
- **Testing Guide**: [doc/automated_testing.md](../automated_testing.md)

## ğŸ™ Contributors

- Stefan Oehrli - Project lead, all development

## ğŸ”œ What's Next

### v0.19.x Patch Releases

- Bug fixes based on user feedback
- Performance optimizations
- Documentation improvements
- Extended test coverage

### v0.20.0 - Performance & Polish

- Profile and optimize critical paths
- Reduce subprocess overhead
- Cache expensive operations
- Enhanced error messages

### v1.0.0 - Stable Release

Major milestone with:

- Production hardening
- Performance benchmarks  
- Complete API stabilization
- Comprehensive user guides
- Extension ecosystem maturity
- Security audit
- Long-term support commitment

See [development roadmap](../v1.0.0-release-plan.md) for detailed planning.

## ğŸ“ Full Changelog

See [CHANGELOG.md](../../CHANGELOG.md) for complete details of all changes since v0.18.x.

## ğŸ“¦ Installation

### Git Clone

```bash
git clone https://github.com/oehrlis/oradba.git
cd oradba
git checkout v0.19.0
./src/bin/oradba_install.sh
```

### Update Existing Installation

```bash
cd $ORADBA_BASE
git pull origin main
git checkout v0.19.0
```Resources

- **User Documentation**: [src/doc/](../../src/doc/)
- **Developer Guide**: [doc/development.md](../development.md)
- **API Reference**: [doc/api.md](../api.md)
- **Testing Guide**: [doc/automated_testing.md](../automated_testing.md)
- **Architecture**: [doc/architecture.md](../architecture.md)

## ğŸ™ Acknowledgment*: [doc/architecture.md](../architecture.md)

## ğŸ™ Contributors

- **Stefan Oehrli** - Project lead, architecture, development, documentation, testing

## ğŸ“« Feedback & Support

- **Issues**: [GitHub Issues](https://github.com/oehrlis/oradba/issues)
- **Discussions**: [GitHub Discussions](https://github.com/oehrlis/oradba/discussions)
- **Email**: <stefan.oehrli@oradba.ch>

---

**Happy Oracle DBA-ing with OraDBA v0.19.0!** ğŸš€

*This release represents months of architectural work to create a solid*
*foundation for future OraDBA development. Thank you for your patience and support!*

