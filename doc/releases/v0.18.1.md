# OraDBA Release 0.18.1 - Oracle Homes Alias Support

**Release Date:** January 12, 2026

## Overview

This minor release enhances the Oracle Homes feature introduced in 0.18.0 by
adding optional **ALIAS_NAME** support, allowing users to define friendly,
customizable names for Oracle Homes independent of their auto-discovered or
technical NAME identifiers.

## What's New

### Oracle Homes ALIAS_NAME Feature

Enhanced configuration format with optional alias names for user-friendly
identification:

**Extended Format:**

```bash
# Format: NAME:ORACLE_HOME:PRODUCT_TYPE:ORDER[:ALIAS_NAME][:DESCRIPTION]
OUD12C:/u01/app/oracle/product/oud12:oud:10:oud12:Oracle Unified Directory 12c
CLIENT19:/opt/oracle/product/19c/client:client:20:client:Oracle Client 19c
WLS14:/u01/app/oracle/middleware/wls14:weblogic:30:wls:WebLogic Server 14c
```

**Benefits:**

- **NAME**: Unique identifier (auto-discovered, technical, uppercase)
- **ALIAS_NAME**: User-friendly name for aliases and shortcuts (customizable,
  lowercase, memorable)
- **Backward Compatible**: Existing configs without ALIAS_NAME continue to work
  (defaults to NAME)
- **Flexible**: Separate concerns - technical discovery vs. user preference

**Usage Examples:**

```bash
# Add with custom alias
oradba_homes.sh add --name OUD12C --path /u01/app/oracle/oud12 --alias oud12

# Add without alias (defaults to name)
oradba_homes.sh add --name CLIENT --path /opt/oracle/client

# Interactive mode prompts for alias
oradba_homes.sh add
```

**List Display:**

```text
Registered Oracle Homes
================================================================================
NAME            TYPE         STATUS       DESCRIPTION
--------------------------------------------------------------------------------
OUD12C          oud          available    [alias: oud12] Oracle Unified Directory 12c
CLIENT19        client       available    Oracle Client 19c
```

**New API Function:**

```bash
# Get alias name for a home
get_oracle_home_alias "OUD12C"  # Returns: oud12
```

## Additional Updates

### Extension Registry

Added two new official extensions:

- **odb_datasafe**: Oracle Data Safe tools for OCI management
  - Simplified CLI for target refresh and management
  - Comprehensive logging and error handling
  - Configuration cascade (defaults → env → config → CLI)
  
- **odb_autoupgrade**: AutoUpgrade wrapper scripts
  - Wrapper scripts for Oracle AutoUpgrade
  - Ready-to-use configuration templates
  - MOS keystore management

### Documentation Build Improvements

- Fixed mkdocs strict mode failures with extension documentation
- Automatic README.md to index.md conversion in synced docs
- Pattern-based filtering to exclude problematic files (release_notes_*.md)
- Better handling of broken relative links in source code references

### CI/CD Standardization

- All workflows now use Makefile targets consistently
- `make lint-shell` replaces direct shellcheck commands
- `make lint-markdown` replaces direct markdownlint commands
- Fixed SC2155 warnings (separate declare/assign/readonly)

## Migration Guide

### For Existing Users

No changes required. The ALIAS_NAME field is optional:

```bash
# Old format still works (ALIAS_NAME defaults to NAME)
OUD12:/u01/app/oracle/oud12:oud:10:Oracle Unified Directory 12c

# New format with explicit alias
OUD12C:/u01/app/oracle/oud12:oud:10:oud12:Oracle Unified Directory 12c
```

### Adding Aliases to Existing Homes

To add aliases to existing configurations, manually edit
`${ORADBA_BASE}/etc/oradba_homes.conf`:

**Before:**

```bash
OUD12:/u01/app/oracle/oud12:oud:10:Oracle Unified Directory 12c
```

**After:**

```bash
OUD12:/u01/app/oracle/oud12:oud:10:oud:Oracle Unified Directory 12c
```

Or remove and re-add with the new alias:

```bash
oradba_homes.sh remove OUD12
oradba_homes.sh add --name OUD12 --path /u01/app/oracle/oud12 --alias oud --type oud
```

## Technical Details

### Configuration Format

```text
Field 1: NAME          - Unique identifier (required)
Field 2: ORACLE_HOME   - Full path (required)
Field 3: PRODUCT_TYPE  - Product type (required)
Field 4: ORDER         - Display order (required)
Field 5: ALIAS_NAME    - User alias (optional, defaults to NAME)
Field 6: DESCRIPTION   - Human description (optional)
```

### Parser Behavior

The parser intelligently handles both formats:

1. If field 5 is empty or contains spaces → treated as description, alias = NAME
2. If field 5 is a single word → treated as alias
3. Field 6 is always treated as description

### API Changes

New functions in `common.sh`:

```bash
get_oracle_home_alias <name>   # Returns alias name for home
```

Updated functions:

```bash
parse_oracle_home <name>        # Now returns 6 fields including alias
list_oracle_homes [type]        # Now includes alias in output
```

## Compatibility

- **Backward Compatible**: All existing configurations work without changes
- **Forward Compatible**: New format recognized by updated scripts only
- **Mixed Environments**: New and old formats can coexist in same config file

## Testing

New test cases added to `tests/test_oradba_homes.bats`:

- Backward compatibility with 5-field format
- Alias display when different from name
- `--alias` option in add command
- Default alias behavior when not specified
- Alias name retrieval via `get_oracle_home_alias()`

Run tests:

```bash
cd /path/to/oradba
make test
# Or specifically:
bats tests/test_oradba_homes.bats
```

## Documentation

Updated files:

- `src/etc/oradba_homes.conf.template` - New format documentation
- `src/bin/oradba_homes.sh` - Usage help updated with --alias option
- `doc/releases/v0.18.1.md` - This release note
- `tests/test_oradba_homes.bats` - Additional test coverage

## Known Issues

None reported.

## Upgrade Path

1. Update to 0.18.1:

   ```bash
   cd $ORADBA_BASE
   git pull
   ```

2. (Optional) Add aliases to existing homes:
   - Edit `${ORADBA_BASE}/etc/oradba_homes.conf` manually, or
   - Use `oradba_homes.sh remove` and `add` with `--alias`

3. Verify:

   ```bash
   oradba_homes.sh list
   oradba_homes.sh show <name>
   ```

## Contributors

- Stefan Oehrli (@oehrlis) - Feature implementation and testing

## Related Issues

- Enhancement: User-friendly aliases for Oracle Homes
- Background: Auto-discovery generates technical names, users want simple aliases

## References

- [Oracle Homes Support (v0.18.0)](v0.18.0.md)
- [Configuration Template](../src/etc/oradba_homes.conf.template)
- [GitHub Repository](https://github.com/oehrlis/oradba)
