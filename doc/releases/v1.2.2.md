# OraDBA v1.2.2 Release Notes

**Release Date:** January 16, 2026  
**Release Type:** Patch Release  
**Status:** Ready for Production

## Overview

OraDBA v1.2.2 is a quick patch release fixing a critical parsing bug in
`oradba_env.sh` discovered immediately after v1.2.1 release.

## Critical Bug Fix

### oradba_env.sh Delimiter Parsing

**Problem:**

- Commands `show`, `status`, and `validate` failed to parse Oracle Home information correctly
- Entire config line displayed as "Name" field, with empty Path and Product fields
- User reported: `oradba_env.sh show dscontest` showed garbled output

**Example of broken output:**

```bash
oracle@labdb:~/ [dstest] oradba_env.sh show dscontest
=== Oracle Home Information ===
Name: dscontest:/opt/oracle/product/exacc-wob-vwg-test:datasafe:50:dstest:DataSafe test On-Premises Connector ds-conn-exacc-wob-vwg-test:AUTO
Path: 
Product: 
Warning: Oracle Home does not exist
```

**Root Cause:**

- `oradba_homes.conf` file uses colon `:` as field delimiter
- Code was looking for pipe `|` delimiter using grep pattern `^${target}|\|${target}\|`
- Code was parsing with `IFS='|'` instead of `IFS=':'`
- Mismatch caused entire line to be read as single field

**Solution:**

- Updated grep patterns from `grep -E "^${target}|\|${target}\|"` to `grep -E "^${target}:|:${target}:"`
- Changed field splitting from `IFS='|'` to `IFS=':'`
- Fixed in three functions: `cmd_show()`, `cmd_validate()`, `cmd_status()`

**Affected Functions:**

1. **cmd_show()** (lines 190-193) - Display Oracle Home details
2. **cmd_validate()** (lines 278-280) - Validate environment
3. **cmd_status()** (lines 351-353) - Check instance/service status

**Impact:**

- **Critical**: All three commands completely non-functional for Oracle Homes
- Affects users managing DataSafe, Instant Client, OUD, WebLogic, and other non-database products
- Database SIDs (from oratab) were not affected as they use different code path

**Verification:**

```bash
# After fix - correct output
oracle@labdb:~/ [dstest] oradba_env.sh show dscontest
=== Oracle Home Information ===
Name: dscontest
Path: /opt/oracle/product/exacc-wob-vwg-test
Product: datasafe
Description: DataSafe test On-Premises Connector ds-conn-exacc-wob-vwg-test

oracle@labdb:~/ [dstest] oradba_env.sh status dscontest
=== Oracle Instance/Service Status ===
SID:          dscontest
HOME:         /opt/oracle/product/exacc-wob-vwg-test
Product Type: DATASAFE
Status:       RUNNING

oracle@labdb:~/ [dstest] oradba_env.sh validate dscontest
=== Validating Oracle Environment ===
ORACLE_SID: not set
ORACLE_HOME: /opt/oracle/product/exacc-wob-vwg-test
```

## Files Modified

- `src/bin/oradba_env.sh`: Fixed delimiter parsing in 3 functions
- `VERSION`: Updated to 1.2.2
- `CHANGELOG.md`: Documented fix

## Upgrade Instructions

### From v1.2.1

```bash
# Download and install v1.2.2
cd /tmp
wget https://github.com/oehrlis/oradba/releases/download/v1.2.2/oradba-1.2.2.tar.gz
tar -xzf oradba-1.2.2.tar.gz
cd oradba-1.2.2
./install.sh

# Reload environment
source ~/.bashrc
```

### Testing After Upgrade

```bash
# Test show command
oradba_env.sh show <oracle_home_name>
# Expected: Properly formatted output with Name, Path, Product fields

# Test status command
oradba_env.sh status <oracle_home_name>
# Expected: SID, HOME, Product Type, Status fields all populated

# Test validate command
oradba_env.sh validate <oracle_home_name>
# Expected: Validation runs against correct ORACLE_HOME
```

## Known Issues

None reported for this release.

## Backward Compatibility

- ✅ 100% backward compatible with v1.2.1
- ✅ No configuration changes required
- ✅ No breaking changes
- ✅ Bug fix only - no new features

## Development Note

This bug was introduced in v1.2.0 when Oracle Home management support was added
to `oradba_env.sh`. The issue existed for SID and Home commands, but was masked
during testing because:

1. Database SIDs use different code path (oratab parsing with pipe delimiter)
2. Initial testing focused on database operations
3. Oracle Home-specific commands were under-tested

**Lesson learned**: Always test both code paths (oratab and oradba_homes.conf) when making changes that affect both.

## Credits

Thanks to user who reported the issue immediately after v1.2.1 release, providing:

- Clear problem description
- Actual command output showing the issue
- Oracle Home entry from oradba_homes.conf

Fast user reporting enabled same-day patch release.

## Support

- **Documentation:** <https://github.com/oehrlis/oradba>
- **Issues:** <https://github.com/oehrlis/oradba/issues>
- **Discussions:** <https://github.com/oehrlis/oradba/discussions>

---

**Full Changelog:** <https://github.com/oehrlis/oradba/blob/main/CHANGELOG.md>
