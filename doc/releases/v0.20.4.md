# Release Notes v0.20.4

**Release Date:** 2026-02-10  
**Type:** Patch Release (Plugin Debugging and Data Safe Status)

## Overview

Version 0.20.4 adds plugin-level debugging facilities with TRACE support and
sanitization of sensitive data, plus refines Data Safe status output to use
plugin metadata and consistent lowercase status values.

## ➕ Added

- **Plugin Debug Facilities**
  - Added TRACE log level for fine-grained debugging (finer than DEBUG)
  - Added `ORADBA_PLUGIN_DEBUG` environment variable to enable plugin-specific debugging
  - Added `is_plugin_debug_enabled()` and `is_plugin_trace_enabled()` helpers
  - Added `sanitize_sensitive_data()` to mask passwords and connection strings
  - DEBUG shows plugin call details, environment snapshot, and exit codes
  - TRACE shows sanitized stdout/stderr from plugin functions
  - Plugin debug enabled when `ORADBA_PLUGIN_DEBUG=true`, `ORADBA_LOG_LEVEL=DEBUG/TRACE`, or `DEBUG=1`
  - Added tests covering plugin debug behavior and updated troubleshooting docs

## ✅ Fixed

- **Data Safe Status Output**
  - Status values use lowercase (running->open, stopped, unknown)
  - Uses Data Safe plugin metadata for version, service name, and port
  - Always displays PORT with `n/a` fallback when the port is missing

## Files Updated

- `CHANGELOG.md`
- `doc/releases/v0.20.4.md`
- `src/lib/oradba_common.sh`
- `src/bin/oradba_env.sh`
- `tests/test_datasafe_plugin.bats`
- `.testmap.yml`
- `src/doc/plugin-development.md`

## Upgrade Notes

No breaking changes. Update and run your usual installation or sync process.
