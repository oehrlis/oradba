# Release v0.11.0

**Release Date:** 2026-01-02  
**Release Type:** Minor Release

## Overview

This release introduces coexistence mode, enabling OraDBA to run alongside TVD
BasEnv and DB*Star without conflicts. OraDBA now intelligently detects existing
environments and adapts its behavior to complement rather than override existing
tools.

## New Features

### Coexistence Mode with TVD BasEnv/DB*Star

OraDBA can now be installed in parallel with TVD BasEnv and DB*Star environments,
automatically detecting and adapting to existing installations.

**Key Features:**

- **Auto-Detection**: Installer checks for `.BE_HOME`, `.TVDPERL_HOME` files and
  `BE_HOME` variable during installation
- **Smart Alias System**: Skips OraDBA aliases when BasEnv versions already exist
- **Respect Existing Environment**: Never modifies PS1, BE_HOME, or other BasEnv
  variables
- **Configuration Priority**: BasEnv settings take precedence, OraDBA acts as
  complementary toolset
- **Force Override Option**: Optional `ORADBA_FORCE=1` to override specific aliases
  when needed

**Implementation Details:**

New configuration file `oradba_local.conf` (auto-generated during installation):

```bash
# Auto-generated during installation on 2026-01-02 12:34:56
# Coexistence mode: basenv (TVD BasEnv/DB*Star detected)
export ORADBA_COEXIST_MODE="basenv"
export ORADBA_INSTALL_DATE="2026-01-02"
export ORADBA_INSTALL_USER="oracle"
```

New functions in `common.sh`:

- `detect_basenv()`: Detects BasEnv/DB*Star installation
- `alias_exists()`: Checks if alias or command already exists
- `safe_alias()`: Creates alias only if safe (respects coexistence mode)

**Configuration Variables:**

- `ORADBA_COEXIST_MODE`: Set to `standalone` (default) or `basenv`
- `ORADBA_FORCE`: Set to `1` to override BasEnv aliases

**Alias Behavior:**

In standalone mode:

- All OraDBA aliases created normally

In basenv mode:

- Skips aliases that already exist in BasEnv (taa, cdd, sq, etc.)
- Creates only missing aliases
- Preserves BasEnv functionality completely

In basenv mode with force:

```bash
export ORADBA_FORCE=1
source oraenv.sh ORCL
# All OraDBA aliases now override BasEnv versions
```

**Documentation:**

- Installation guide includes parallel installation section
- Configuration guide has comprehensive "Coexistence Mode" chapter
- Troubleshooting guide for common coexistence scenarios
- Updated architecture diagrams showing detection flow

**Use Cases:**

1. **DBA Workstation**: Use BasEnv for primary work, OraDBA for specific features
2. **Migration Period**: Gradually transition from BasEnv to OraDBA
3. **Mixed Team**: Different DBAs can use different toolsets
4. **Special Features**: Use OraDBA's enhanced diagnostics alongside BasEnv

**Resolves:** Issue #19

## Technical Changes

### Core Libraries

**src/lib/common.sh:**

- Added `detect_basenv()` function for environment detection
- Added `alias_exists()` function for checking existing aliases/commands
- Added `safe_alias()` function for conditional alias creation
- Enhanced logging for coexistence mode operations

**src/lib/aliases.sh:**

- All alias definitions converted to use `safe_alias()` function
- Preserves BasEnv aliases when coexistence mode active
- Comprehensive coverage: SQL*Plus, RMAN, navigation, diagnostics, editing, operations

### Configuration System

**src/etc/oradba_core.conf:**

- Added `ORADBA_COEXIST_MODE` variable (default: `standalone`)
- Added `ORADBA_FORCE` variable (default: `0`)

**src/etc/oradba_local.conf:**

- New auto-generated configuration file
- Created during installation with detected mode
- Contains installation metadata and coexistence settings
- Loaded after core config, before standard config

### Installation

**src/bin/oradba_install.sh:**

- Added BasEnv detection logic during installation
- Checks for `.BE_HOME`, `.TVDPERL_HOME` files
- Checks for `BE_HOME` environment variable
- Generates `oradba_local.conf` with detected mode
- Logs detection status for user awareness

**src/bin/oraenv.sh:**

- Added loading of `oradba_local.conf` after core config
- Ensures coexistence mode settings are applied early

### Documentation

**Updated Guides:**

- [02-installation.md](../../src/doc/02-installation.md): New "Parallel Installation" section
- [05-configuration.md](../../src/doc/05-configuration.md): New "Coexistence Mode" chapter

**Updated Diagrams:**

- Architecture System: Shows BasEnv detection in core libraries
- Configuration Hierarchy: Added Level 1B for oradba_local.conf
- Installation Flow: Added BasEnv detection step
- Configuration Sequence: Shows local config loading
- Alias Generation Flow: Shows safe_alias() conditional logic
- oraenv.sh Flow: Shows coexistence mode checks

**Content Added:**

- Auto-detection explanation with examples
- Coexistence behavior comparison table
- Mode value descriptions (standalone vs basenv)
- Force mode step-by-step instructions
- Environment variable protection details
- Installation layout examples
- Status checking commands
- Troubleshooting guide with common scenarios
- Updated best practices for coexistence

## Installation

Download the installer:

```bash
# Direct download
curl -LO https://github.com/oehrlis/oradba/releases/download/v0.11.0/oradba_install.sh
chmod +x oradba_install.sh

# Or use the bundled installer
curl -LO https://github.com/oehrlis/oradba/releases/download/v0.11.0/oradba-0.11.0.tar.gz
tar -xzf oradba-0.11.0.tar.gz
cd oradba-0.11.0
./oradba_install.sh
```

**Standard Installation:**

```bash
./oradba_install.sh --prefix /opt/oracle/local/oradba
```

**With BasEnv Detected:**

```bash
./oradba_install.sh --prefix /opt/oracle/local/oradba
# Installation will detect BasEnv and enable coexistence mode automatically
# Output will show: "TVD BasEnv / DB*Star detected - enabling coexistence mode"
```

**Update Existing Installation:**

```bash
./oradba_install.sh --prefix /opt/oracle/local/oradba --update
```

## Upgrade Notes

### From v0.10.x

No breaking changes. Upgrade is seamless:

1. Existing installations continue to work in standalone mode
2. New `oradba_local.conf` will be created on upgrade if BasEnv detected
3. All existing aliases and configurations remain functional
4. To enable coexistence mode manually, create `oradba_local.conf`:

```bash
cat > ${ORADBA_CONFIG_DIR}/oradba_local.conf << 'EOF'
export ORADBA_COEXIST_MODE="basenv"
EOF
```

### Configuration Changes

- New file: `etc/oradba_local.conf` (auto-generated)
- New variable: `ORADBA_COEXIST_MODE` in `oradba_core.conf`
- New variable: `ORADBA_FORCE` in `oradba_core.conf`

### Behavior Changes

**For Standalone Users (No BasEnv):**

- No changes - everything works as before

**For BasEnv Users (New Installations):**

- OraDBA aliases only created when they don't exist in BasEnv
- BasEnv aliases take priority
- Can use `ORADBA_FORCE=1` to override if needed

## Testing

Coexistence mode tested with:

- TVD BasEnv 2.x installations
- DB*Star environments
- Standalone Oracle installations
- Mixed environments (some DBs with BasEnv, some without)

All 492 automated tests passing on:

- Oracle Linux 8
- Oracle Linux 9
- Ubuntu 22.04
- macOS (development)

## Documentation

- **Online:** <https://oehrlis.github.io/oradba>
- **PDF:** Included in distribution (`doc/oradba-user-guide.pdf`)
- **Local:** Browse `src/doc/` after installation

## Contributors

Thanks to all contributors who made this release possible!

## Known Issues

None at time of release.

## Next Release

Planned for v0.11.1 or v0.12.0:

- Additional coexistence testing scenarios
- Enhanced BasEnv detection for edge cases
- Selective force mode (per-alias override control)
- Migration guide from BasEnv-only to dual installation

## Links

- **GitHub Release:** <https://github.com/oehrlis/oradba/releases/tag/v0.11.0>
- **Full Changelog:** [CHANGELOG.md](../../CHANGELOG.md#0110---2026-01-02)
- **Installation Guide:** [02-installation.md](../../src/doc/02-installation.md)
- **Configuration Guide:** [05-configuration.md](../../src/doc/05-configuration.md)
- **Issue #19:** <https://github.com/oehrlis/oradba/issues/19>
