# OraDBA Shell Aliases

OraDBA provides a comprehensive set of shell aliases to streamline Oracle database administration tasks. Aliases are automatically loaded when you set your Oracle environment using `oraenv.sh`.

## Quick Reference

### SQL*Plus Aliases

| Alias | Description | Command |
|-------|-------------|---------|
| `sq` | SQL*Plus as SYSDBA (with rlwrap if available) | `sqlplus / as sysdba` |
| `sqh` | SQL*Plus without login (with rlwrap if available) | `sqlplus /nolog` |
| `sqlp` | SQL*Plus as SYSOPER | `sqlplus / as sysoper` |
| `sqls` | SQL*Plus as SYSDBA (alias for sq) | `sqlplus / as sysdba` |

### RMAN Alias

| Alias | Description | Command |
|-------|-------------|---------|
| `rmans` | RMAN with target connection | `rman target /` |

### Directory Navigation Aliases

| Alias | Description | Target Directory |
|-------|-------------|------------------|
| `cdob` | Change to ORACLE_BASE | `$ORACLE_BASE` |
| `cdoh` | Change to ORACLE_HOME | `$ORACLE_HOME` |
| `cdbn` | Change to ORACLE_HOME/bin | `$ORACLE_HOME/bin` |
| `cdnw` | Change to TNS_ADMIN (network admin) | `$TNS_ADMIN` or `$ORACLE_HOME/network/admin` |

### Database Operations Aliases

| Alias | Description | Command |
|-------|-------------|---------|
| `lstat` | Listener status | `lsnrctl status` |
| `lstart` | Start listener | `lsnrctl start` |
| `lstop` | Stop listener | `lsnrctl stop` |
| `pmon` | Show running database processes | `ps -ef \| grep pmon` |
| `oratab` | Display oratab file | `cat /etc/oratab` |
| `tns` | Display tnsnames.ora | `cat $TNS_ADMIN/tnsnames.ora` |

### SID-Specific Dynamic Aliases

These aliases are generated dynamically based on the current `ORACLE_SID` and diagnostic_dest location:

| Alias | Description | Command |
|-------|-------------|---------|
| `taa` | Tail alert log | `tail -f <alert_log_path>` |
| `vaa` | View alert log with less | `less <alert_log_path>` |
| `cdda` | Change to diagnostic_dest | `cd <diagnostic_dest>` |
| `cdta` | Change to trace directory | `cd <diagnostic_dest>/trace` |
| `cdaa` | Change to alert directory | `cd <diagnostic_dest>/alert` |

## Configuration

### Enabling/Disabling Aliases

Aliases are loaded by default. To disable them, set the following in [oradba_core.conf](../etc/oradba_core.conf):

```bash
ORADBA_LOAD_ALIASES="false"
```

### Custom Aliases

You can add custom aliases in [oradba_customer.conf](../etc/oradba_customer.conf.example):

```bash
# Custom SQL*Plus alias with connection string
alias sqdev='sqlplus user/pass@dev'

# Custom directory alias
alias cdarch='cd /backup/oracle/archive'

# Custom backup alias
alias fullbackup='rman target / cmdfile=${ORADBA_PREFIX}/rcv/backup_full.rman'
```

## rlwrap Integration

OraDBA automatically uses [rlwrap](https://github.com/hanslub42/rlwrap) with SQL*Plus if it's available, providing:

- Command history (up/down arrows)
- Tab completion
- Editing capabilities

If rlwrap is not installed, the aliases fall back to standard SQL*Plus without these features.

### Installing rlwrap

**macOS:**
```bash
brew install rlwrap
```

**Linux (RHEL/OL/CentOS):**
```bash
sudo yum install rlwrap
```

**Linux (Debian/Ubuntu):**
```bash
sudo apt-get install rlwrap
```

## Dynamic Alias Generation

### How It Works

When you set your Oracle environment using `oraenv.sh`, the `generate_sid_aliases()` function in [aliases.sh](../lib/aliases.sh) automatically:

1. Queries the database for `diagnostic_dest` parameter (or uses convention-based path as fallback)
2. Generates SID-specific aliases for trace and alert log access
3. Creates directory navigation aliases based on the actual paths

### Example

```bash
$ source oraenv.sh ORCL
Setting Oracle environment for ORCL...
Oracle environment set successfully.

$ type taa
taa is aliased to `tail -f /u01/app/oracle/diag/rdbms/orcl/ORCL/alert/log.xml'

$ cdta
$ pwd
/u01/app/oracle/diag/rdbms/orcl/ORCL/trace
```

## Alias Categories

### 1. Simple Aliases

Defined in [oradba_standard.conf](../etc/oradba_standard.conf), these are static aliases that don't change based on context:

- SQL*Plus and RMAN connection shortcuts
- Basic directory navigation (ORACLE_HOME, ORACLE_BASE, etc.)
- Listener commands
- Configuration file viewing

### 2. Dynamic Aliases

Generated by functions in [aliases.sh](../lib/aliases.sh), these adapt to the current ORACLE_SID:

- Trace and alert log access (paths vary by SID)
- Diagnostic directory navigation (based on diagnostic_dest)
- rlwrap integration (conditional on availability)

## Troubleshooting

### Aliases Not Loading

1. Check if aliases are enabled:
   ```bash
   echo $ORADBA_LOAD_ALIASES
   ```

2. Verify aliases.sh exists:
   ```bash
   ls -l ${ORADBA_PREFIX}/lib/aliases.sh
   ```

3. Check debug output:
   ```bash
   DEBUG=1 source oraenv.sh ORCL
   ```

### Dynamic Aliases Not Generated

1. Verify ORACLE_SID is set:
   ```bash
   echo $ORACLE_SID
   ```

2. Check if database is accessible:
   ```bash
   sqlplus -S / as sysdba <<< "SELECT instance_name FROM v\$instance;"
   ```

3. Check diagnostic_dest parameter:
   ```bash
   sqlplus -S / as sysdba <<< "SHOW PARAMETER diagnostic_dest"
   ```

### rlwrap Not Working

1. Check if rlwrap is installed:
   ```bash
   which rlwrap
   ```

2. Verify rlwrap configuration:
   ```bash
   echo $RLWRAP_COMMAND
   echo $RLWRAP_OPTS
   ```

3. Test rlwrap directly:
   ```bash
   rlwrap -i -c -f $ORACLE_HOME/bin/sqlplus sqlplus / as sysdba
   ```

## See Also

- [Configuration Guide](CONFIGURATION.md) - Hierarchical configuration system
- [Usage Guide](USAGE.md) - Complete OraDBA usage documentation
- [Quick Start](../doc/QUICKSTART.md) - Getting started with OraDBA
